"use strict";(globalThis.webpackChunkknowledge=globalThis.webpackChunkknowledge||[]).push([[441],{6578(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"tech/docker","title":"Docker","description":"Some useful docker commands","source":"@site/knowledge/tech/docker.md","sourceDirName":"tech","slug":"/tech/docker","permalink":"/knowledge/tech/docker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Data-Engineering","permalink":"/knowledge/tech/data-engineering"},"next":{"title":"Hosting","permalink":"/knowledge/tech/hosting"}}');var o=r(6070),a=r(9531);const s={},i="Docker",l={},d=[{value:"Docker",id:"docker-1",level:2},{value:"Docker Compose",id:"docker-compose",level:2},{value:"Docker Machine",id:"docker-machine",level:2},{value:"Create new server",id:"create-new-server",level:4},{value:"Update",id:"update",level:4},{value:"See Logs",id:"see-logs",level:4},{value:"Remove server",id:"remove-server",level:4}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"docker",children:"Docker"})}),"\n",(0,o.jsx)(n.p,{children:"Some useful docker commands"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#docker",children:"Docker"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#docker-compose",children:"Docker Compose"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#docker-machine",children:"Docker Machine"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#create-new-server",children:"Create new server"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#update",children:"Update"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#see-logs",children:"See Logs"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#remove-server",children:"Remove server"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#resources",children:"Resources"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"docker-1",children:"Docker"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"# Create\ndocker build -t appname .\n\n# Start\ndocker run appname\n\n# List all containers\ndocker ps -a -q\n\n# Stop all containers\ndocker stop $(docker ps -a -q)\n\n# Kill all containers\ndocker kill $(docker ps -q)\n\n# Remove all containers\ndocker rm $(docker ps -a -q)\n\n# Remove all docker images\ndocker rmi $(docker images -q)\n\n# Prune all volumes\ndocker system prune -a -f --volumes\n\n# Enter into interative command line for a given container with environment variables loaded.\ndocker exec -it CONTAINER_NAME sh\n"})}),"\n",(0,o.jsx)(n.h2,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"# Start\ndocker compose up\n\n# Start detached\ndocker compose up -d\n\n# List\ndocker compose ps\n\n# Rebuild\ndocker compose up --force-recreate --build\n"})}),"\n",(0,o.jsx)(n.h2,{id:"docker-machine",children:"Docker Machine"}),"\n",(0,o.jsx)(n.h4,{id:"create-new-server",children:"Create new server"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'# Override default profile\nAWS_ACCESS_KEY_ID=$(aws --profile PROFILE_NAME configure get aws_access_key_id)\nAWS_SECRET_ACCESS_KEY=$(aws --profile PROFILE_NAME configure get aws_secret_access_key)\ndocker-machine create \\\n  --driver amazonec2 \\\n  --amazonec2-region ap-southeast-1 \\\n  --amazonec2-open-port 3001 \\\n  --amazonec2-access-key $AWS_ACCESS_KEY_ID \\\n  --amazonec2-secret-key $AWS_SECRET_ACCESS_KEY \\\n  --amazonec2-instance-type t2.nano \\\n  machine-name\n\ndocker-machine ls # check that it exists\n\neval $(docker-machine env machine-name) # attach to machine\ndocker compose up -d # deploy on machine\neval "$(docker-machine env -u)" # attach to local again\n'})}),"\n",(0,o.jsx)(n.h4,{id:"update",children:"Update"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'eval $(docker-machine env machine-name)   # attach to machine\ndocker compose build --no-cache           # deploy on machine\ndocker compose up -d                      # make sure it\'s up and reloads config\neval "$(docker-machine env -u)"           # attach to local again\n'})}),"\n",(0,o.jsxs)(n.p,{children:["This will destroy the redis instance: ",(0,o.jsx)(n.code,{children:"docker compose up --force-recreate"})]}),"\n",(0,o.jsx)(n.h4,{id:"see-logs",children:"See Logs"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'eval $(docker-machine env machine-name) # attach to machine\ndocker ps # see list of machines\ndocker logs __ID__ # see logs\neval "$(docker-machine env -u)" # attach to local again\n'})}),"\n",(0,o.jsx)(n.h4,{id:"remove-server",children:"Remove server"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"docker-machine rm machine-name\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},9531(e,n,r){r.d(n,{R:()=>s,x:()=>i});var c=r(758);const o={},a=c.createContext(o);function s(e){const n=c.useContext(a);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),c.createElement(a.Provider,{value:n},e.children)}}}]);